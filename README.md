# React Profiler Comparator testing

| All stuff Callstack & ChatGPT ❤️

## 📌 Purpose

Bash script compares ***React Profiler JSON traces*** to analyze and quantify changes in rendering performance. It provides quick insight into regressions or improvements using statistical summaries and visual indicators. ***Should help with quickly comparing changes between React Profiler traces :)***

---

## ⚙️ What It Does

- Parses `.json` traces generated by the React Profiler.
- Extracts all commit render durations.
- Calculates total render time and number of commits.
- Computes key **render duration percentiles**:
    - **p50** (median)
    - **p95** (slow renders)
    - **p99** (extreme outliers)
- Supports **comparison of multiple trace files**.
- Outputs:
    - 📈 A summary of each file
    - 🔁 A diff view showing total time and commit count changes
    - 🔍 Optional one-by-one comparison of individual commit durations *(when using `-baseline`)*

---

## 🚀 How to Use

1️⃣ Download/copy script:

[compare-traces.sh](attachment:fa239252-181d-436d-82c1-03957dc45e3e:compare-traces.sh)

2️⃣ Then run in your folder:

```bash
./compare-traces.sh before.json after.json
```

### 🧪 Compare multiple traces

You can now compare more than two traces:

```bash
./compare-traces.sh traceA.json traceB.json traceC.json
```

### 🧾 Use a baseline trace

Compare all traces against a single baseline file:

```bash
./compare-traces.sh --baseline=main.json variant1.json variant2.json
```

---

## 💌 Results

### 📊 Summary and Diff View

### 🔍 One-by-one comparison (baseline only)

If you use `--baseline`, you can opt into a **commit-by-commit comparison**, including **rolling performance delta**:

```bash
./compare-traces.sh --baseline=main.json variant1.json
```

---

### 🎥 Recording

---

## 📎 Requirements

- `jq` must be installed
    
    → Install with: `brew install jq` (on macOS)
    

---

## ❓ FAQ

### Why not just use Reassure?

Great question! Reassure is an awesome tool for automation, while this script is optimized for **manual, ad hoc investigations**:

- ✅ No need to write test cases
- ✅ No need to orchestrate setups
- ✅ Still fully compatible with React Profiler
- ✅ Can be combined with automated tools like Reassure
